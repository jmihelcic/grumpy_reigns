{"version":3,"sources":["main.es6"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["/**\r\n * Created by mihelcic on 27. 08. 2016.\r\n */\r\n\r\nconsole.log('im alive!')\r\n\r\nclass Card {\r\n  constructor() {\r\n    this.container = document.querySelector('.body__card-container')\r\n    this.card = this.container.querySelector('.playing-card')\r\n    this.name = 'name'\r\n    this.description = 'description'\r\n    this.image = ''\r\n\r\n    this.loadingNewCard = false\r\n    this.dragging = false\r\n    this.locked = false\r\n    this.startX = 0\r\n    this.currentX = 0\r\n\r\n    // Collect position data\r\n    let data = this.container.querySelector('.deck').getBoundingClientRect()\r\n    console.log('data', data, data.left)\r\n    this.cardX = data.left\r\n    this.cardW = data.width\r\n    this.allowedDistance = (data.width / 2) * 0.7\r\n\r\n    this.update = this.update.bind(this)\r\n    // Init\r\n    this.initEventListeners()\r\n  }\r\n\r\n  load(name, description, image) {\r\n    this.name = name\r\n    this.description = description\r\n    this.image = image\r\n  }\r\n\r\n  initEventListeners() {\r\n    this.container.addEventListener('touchstart', (event) => {\r\n      /*\r\n      if (this.dragging || this.locked)\r\n        return\r\n        */\r\n\r\n      if (!event.target.classList.contains('playing-card'))\r\n        return\r\n\r\n      this.dragging = true\r\n      this.locked = true\r\n      this.startX = event.touches[0].pageX\r\n      this.currentX = event.touches[0].pageX\r\n      requestAnimationFrame(this.update)\r\n\r\n      //console.log('touchstart')\r\n\r\n    })\r\n\r\n\r\n    this.container.addEventListener('touchmove', (event) => {\r\n      if (!this.dragging)\r\n        return\r\n\r\n      this.currentX = event.touches[0].pageX\r\n    })\r\n\r\n\r\n    this.container.addEventListener('touchend', (event) => {\r\n      if (!this.dragging)\r\n        return\r\n\r\n      let distance = (this.currentX - this.startX)\r\n      if (distance > this.allowedDistance) {\r\n        this.startX = this.allowedDistance * 2\r\n      }\r\n      else if (distance < -this.allowedDistance) {\r\n        this.startX = -this.allowedDistance * 2\r\n      }\r\n      this.dragging = false\r\n      //console.log('touchend')\r\n    })\r\n  }\r\n\r\n  update() {\r\n    if(!this.dragging) {\r\n      this.currentX -= (this.currentX - this.startX) / 8\r\n    }\r\n\r\n    let X = (this.currentX - this.startX)\r\n    let procentage = ((X * 100) / this.allowedDistance) / 100\r\n    let deg = procentage * 3 // deg\r\n    let Y = Math.abs(procentage * 14) // px\r\n    let opacity = Math.max((2.5 - Math.abs(procentage)), 0)\r\n    let transform = `translate3d(${X}px, ${Y}px, 0) rotate(${deg}deg)`\r\n    this.card.style.transform = transform\r\n    this.card.style.opacity = opacity\r\n\r\n    //console.log('update', transform)\r\n\r\n    let almostThere = (Math.abs(this.currentX - this.startX) < 0.1)\r\n\r\n    if(!this.dragging) {\r\n      if(almostThere) {\r\n        this.card.style.transform = 'translate3d(0,0,0) rotate(0deg)'\r\n        this.card.style.opacity = 1\r\n        this.locked = false\r\n        return\r\n      }\r\n    }\r\n\r\n    requestAnimationFrame(this.update)\r\n  }\r\n}\r\n\r\nconst card = new Card()"]}